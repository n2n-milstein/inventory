{"version":3,"sources":["webpack:///./src/views/Inventory.vue?24d4","webpack:///./src/views/Inventory.vue","webpack:///./src/views/Inventory.vue?fddb","webpack:///./src/views/Inventory.vue?dd7a"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","model","value","callback","$$v","search","expression","selected","length","on","$event","addItem","_v","_s","inventoryActions","getSpreadsheet","archiveSelected","startDateFilter","endDateFilter","statusFilter","classFilter","donorFilter","zoneFilter","inventory","headers","COLLECTION","editCard","isAdd","menuActions","menuLoading","commitAddItem","commitArchive","commitExport","staticRenderFns","NAMESPACE","collections","INVENTORY","Date","toISOString","substr","Object","keys","values","filter","v","map","text","index","downloading","icon","desc","emit","current","includes","valDate","Timing","formatDate","endDate","startDate","inRange","loading","bindItems","exportSelected","setCurrent","item","Furniture","commitItem","clearCurrent","archiveCurrent","exportCurrent","BIND_ITEMS","SET_CURRENT","EXPORT_SELECTED","CLEAR_CURRENT","EXPORT_CURRENT","components","FurnitureTable","FurnitureTableHeader","ViewActionGroup","FurnitureCardDialog","TableFilters","computed","methods","component","VBtn","VCol","VIcon"],"mappings":"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","file":"js/chunk-2d224cf4.c050c908.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-col',{attrs:{\"cols\":\"12\"}},[_c('furniture-table-header',{staticClass:\"px-4 mb-3\",attrs:{\"title\":\"Inventory\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}}),_c('div',{staticClass:\"mb-4 d-inline-flex\",attrs:{\"align\":\"center\"}},[_c('v-btn',{attrs:{\"disabled\":_vm.selected.length > 0,\"icon\":_vm.selected.length > 0,\"outlined\":_vm.selected.length > 0,\"color\":\"primary\",\"rounded\":\"\"},on:{\"click\":function($event){return _vm.addItem()}}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"add\")]),_vm._v(\" \"+_vm._s(_vm.selected.length > 0 ? \"\" : \"Add\")+\" \")],1),_c('view-action-group',{staticClass:\"ml-3\",attrs:{\"disabled-message\":\"Select items to use actions\",\"actions\":_vm.inventoryActions,\"disabled\":_vm.selected.length < 1},on:{\"download\":_vm.getSpreadsheet,\"archive\":function($event){return _vm.archiveSelected()}}})],1),_c('table-filters',{attrs:{\"start-date-filter\":_vm.startDateFilter,\"end-date-filter\":_vm.endDateFilter,\"status-filter\":_vm.statusFilter,\"class-filter\":_vm.classFilter,\"donor-filter\":_vm.donorFilter,\"zone-filter\":_vm.zoneFilter,\"inventory\":_vm.inventory},on:{\"startdate\":function($event){_vm.startDateFilter = $event},\"enddate\":function($event){_vm.endDateFilter = $event},\"status\":function($event){_vm.statusFilter = $event},\"class\":function($event){_vm.classFilter = $event},\"donor\":function($event){_vm.donorFilter = $event},\"zone\":function($event){_vm.zoneFilter = $event}}}),_c('furniture-table',{attrs:{\"namespace\":\"inventory\",\"headers\":_vm.headers,\"search\":_vm.search,\"items\":_vm.inventory,\"collection\":_vm.COLLECTION},on:{\"download\":function($event){return _vm.getSpreadsheet()}}}),_c('furniture-card-dialog',{attrs:{\"namespace\":\"inventory\",\"dialog\":_vm.editCard,\"is-add\":_vm.isAdd,\"menu-actions\":_vm.menuActions,\"menu-loading\":_vm.menuLoading},on:{\"add\":function($event){return _vm.commitAddItem()},\"archive\":function($event){return _vm.commitArchive()},\"export\":function($event){return _vm.commitExport()},\"close\":function($event){_vm.isAdd = false}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport { mapActions, mapGetters } from \"vuex\";\nimport Component from \"vue-class-component\";\n// network, data\nimport collections from \"@/network/collections\";\nimport { Furniture, Status } from \"@/data/Furniture\";\nimport { FClass } from \"@/data/furniture/Physical\";\nimport Timing from \"@/data/furniture/Timing\";\nimport ViewAction from \"@/data/ViewAction\";\n// components\nimport FurnitureTable from \"@/components/FurnitureTable.vue\";\nimport FurnitureTableHeader from \"@/components/FurnitureTableHeader.vue\";\nimport ViewActionGroup from \"@/components/ViewActionGroup.vue\";\nimport FurnitureCardDialog from \"@/components/FurnitureCardDialog.vue\";\nimport TableFilters from \"@/components/FurnitureTableFilters.vue\";\n// store\nimport { action } from \"@/store/modules/collection/types\";\n\nconst NAMESPACE = \"inventory\";\n\n@Component({\n  components: {\n    FurnitureTable,\n    FurnitureTableHeader,\n    ViewActionGroup,\n    FurnitureCardDialog,\n    TableFilters,\n  },\n  computed: mapGetters(NAMESPACE, {\n    inventory: \"getItems\",\n    current: \"getCurrent\",\n    selected: \"getSelected\",\n  }),\n  methods: mapActions(NAMESPACE, [\n    action.BIND_ITEMS,\n    action.SET_CURRENT,\n    action.CLEAR_CURRENT,\n    action.EXPORT_SELECTED,\n    action.EXPORT_CURRENT,\n    \"archiveSelected\",\n    \"archiveCurrent\",\n    \"commitItem\",\n  ]),\n})\nexport default class Inventory extends Vue {\n  readonly COLLECTION = collections.INVENTORY;\n\n  /** Vuex map helper properties */\n  readonly current!: Furniture;\n\n  readonly [action.BIND_ITEMS]!: () => Promise<void>;\n\n  readonly [action.SET_CURRENT]!: ({ item }: { item: Furniture }) => void;\n\n  readonly [action.EXPORT_SELECTED]!: () => Promise<void>;\n\n  readonly [action.CLEAR_CURRENT]!: () => void;\n\n  readonly [action.EXPORT_CURRENT]!: () => Promise<void>;\n\n  readonly commitItem!: () => Promise<void>;\n\n  readonly archiveCurrent!: () => Promise<void>;\n\n  /** Furniture card dialog */\n  isAdd = false;\n\n  get editCard(): boolean {\n    return !!this.current;\n  }\n\n  /** Actions and search */\n  search = \"\";\n\n  /** start filters */\n  startDateFilter = \"\";\n\n  endDateFilter = new Date().toISOString().substr(0, 10);\n\n  classFilter = Object.keys(FClass);\n\n  statusFilter = Object.values(Status)\n    .filter((v) => typeof (v as any) !== \"number\")\n    .map((text, index) => {\n      return index;\n    });\n\n  donorFilter = [] as string[];\n\n  zoneFilter = [] as string[];\n\n  get headers(): any {\n    return [\n      {\n        text: \"Class\",\n        value: \"physical.class\",\n        filter: (value: string): boolean => {\n          return this.classFilter.includes(value);\n        },\n      },\n      {\n        text: \"Status\",\n        value: \"status\",\n        filter: (value: number): boolean => {\n          return this.statusFilter.includes(value);\n        },\n      },\n      {\n        text: \"Zone\",\n        value: \"donor.zone\",\n        filter: (value: any): boolean => {\n          if (this.zoneFilter.length === 0) return true;\n          return this.zoneFilter.includes(value);\n        },\n      },\n      {\n        text: \"Address\",\n        value: \"donor.address\",\n        // filter: (value: any): boolean => {\n        //   if (this.addressFilter.length === 0) return true;\n        //   return this.addressFilter.includes(value);\n        // },\n      },\n      {\n        text: \"Donor\",\n        value: \"donor.name\",\n        filter: (value: any): boolean => {\n          if (this.donorFilter.length === 0) return true;\n          return this.donorFilter.includes(value);\n        },\n      },\n      {\n        text: \"Date Added\",\n        value: \"timing.dateAdded\",\n        filter: (value: any): boolean => {\n          const valDate = new Date(Timing.formatDate(value));\n          const endDate = new Date(this.endDateFilter);\n          if (this.startDateFilter === \"\") {\n            return valDate <= endDate;\n          }\n          const startDate = new Date(this.startDateFilter);\n          return Timing.inRange(valDate, startDate, endDate);\n        },\n      },\n    ];\n  }\n\n  /** end filters */\n\n  downloading = false;\n\n  get inventoryActions(): ViewAction[] {\n    return [\n      { icon: \"archive\", desc: \"Archive selected items\", emit: \"archive\" },\n      {\n        icon: \"cloud_download\",\n        desc: \"Export selected items to spreadsheet\",\n        emit: \"download\",\n        loading: (): boolean => this.downloading,\n      },\n      {\n        icon: \"playlist_add\",\n        desc: \"Add selected items to run\",\n        emit: \"list-add\",\n      },\n    ];\n  }\n\n  menuLoading = false;\n\n  readonly menuActions: ViewAction[] = [\n    { icon: \"archive\", desc: \"Archive\", emit: \"archive\" },\n    {\n      icon: \"cloud_download\",\n      desc: \"Export\",\n      emit: \"export\",\n    },\n  ];\n\n  /**\n   * Called when component is mounted (lifecycle hook); binds inventory in\n   * store to Firebase.\n   */\n  mounted(): void {\n    this.bindItems();\n  }\n\n  async getSpreadsheet(): Promise<void> {\n    this.downloading = true;\n    await this.exportSelected();\n    this.downloading = false;\n  }\n\n  /**\n   * Shows dialog to add item\n   */\n  addItem(): void {\n    this.setCurrent({ item: new Furniture() });\n    this.isAdd = true;\n  }\n\n  /**\n   * Commits new item to Firestore\n   */\n  async commitAddItem(): Promise<void> {\n    await this.commitItem();\n    this.isAdd = false;\n    this.clearCurrent();\n  }\n\n  async commitArchive(): Promise<void> {\n    this.menuLoading = true;\n    await this.archiveCurrent();\n    this.menuLoading = false;\n    this.clearCurrent();\n  }\n\n  async commitExport(): Promise<void> {\n    this.menuLoading = true;\n    await this.exportCurrent();\n    this.menuLoading = false;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Inventory.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Inventory.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Inventory.vue?vue&type=template&id=2e934060&\"\nimport script from \"./Inventory.vue?vue&type=script&lang=ts&\"\nexport * from \"./Inventory.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VCol,VIcon})\n"],"sourceRoot":""}