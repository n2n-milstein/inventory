{"version":3,"sources":["webpack:///./src/views/Inventory.vue?b5e6","webpack:///./src/views/Inventory.vue","webpack:///./src/views/Inventory.vue?fddb","webpack:///./src/views/Inventory.vue?dd7a"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","model","value","callback","$$v","search","expression","selected","length","on","$event","addItem","_v","_s","inventoryActions","getSpreadsheet","archiveSelected","startDateFilter","endDateFilter","statusFilter","classFilter","donorFilter","zoneFilter","inventory","current","headers","COLLECTION","setCurrent","item","editCard","isAdd","menuActions","menuLoading","commitItem","commitArchive","commitExport","closeDialog","staticRenderFns","NAMESPACE","collections","INVENTORY","Date","toISOString","substr","Object","keys","values","filter","v","map","text","index","downloading","icon","desc","emit","includes","valDate","Timing","formatDate","endDate","startDate","inRange","loading","bindItems","exportSelected","Furniture","clearCurrent","updates","updateCurrent","commitAddItem","commitUpdates","archiveCurrent","exportCurrent","BIND_ITEMS","SET_CURRENT","EXPORT_SELECTED","CLEAR_CURRENT","EXPORT_CURRENT","COMMIT_UPDATES","UPDATE_CURRENT","components","FurnitureTable","FurnitureTableHeader","ViewActionGroup","FurnitureCardDialog","TableFilters","computed","methods","component","VBtn","VCol","VIcon"],"mappings":"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","file":"js/chunk-2d224cf4.62436bf7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-col',{attrs:{\"cols\":\"12\"}},[_c('furniture-table-header',{staticClass:\"px-4 mb-3\",attrs:{\"title\":\"Inventory\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}}),_c('div',{staticClass:\"mb-4 d-inline-flex\",attrs:{\"align\":\"center\"}},[_c('v-btn',{attrs:{\"disabled\":_vm.selected.length > 0,\"icon\":_vm.selected.length > 0,\"outlined\":_vm.selected.length > 0,\"color\":\"primary\",\"rounded\":\"\"},on:{\"click\":function($event){return _vm.addItem()}}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"add\")]),_vm._v(\" \"+_vm._s(_vm.selected.length > 0 ? \"\" : \"Add\")+\" \")],1),_c('view-action-group',{staticClass:\"ml-3\",attrs:{\"disabled-message\":\"Select items to use actions\",\"actions\":_vm.inventoryActions,\"disabled\":_vm.selected.length < 1},on:{\"download\":_vm.getSpreadsheet,\"archive\":function($event){return _vm.archiveSelected()}}})],1),_c('table-filters',{attrs:{\"start-date-filter\":_vm.startDateFilter,\"end-date-filter\":_vm.endDateFilter,\"status-filter\":_vm.statusFilter,\"class-filter\":_vm.classFilter,\"donor-filter\":_vm.donorFilter,\"zone-filter\":_vm.zoneFilter,\"inventory\":_vm.inventory},on:{\"startdate\":function($event){_vm.startDateFilter = $event},\"enddate\":function($event){_vm.endDateFilter = $event},\"status\":function($event){_vm.statusFilter = $event},\"class\":function($event){_vm.classFilter = $event},\"donor\":function($event){_vm.donorFilter = $event},\"zone\":function($event){_vm.zoneFilter = $event}}}),_c('furniture-table',{attrs:{\"current\":_vm.current,\"headers\":_vm.headers,\"search\":_vm.search,\"items\":_vm.inventory,\"collection\":_vm.COLLECTION},on:{\"download\":function($event){return _vm.getSpreadsheet()},\"on-item-click\":function($event){return _vm.setCurrent({ item: $event })}}}),_c('furniture-card-dialog',{attrs:{\"current\":_vm.current,\"dialog\":_vm.editCard,\"is-add\":_vm.isAdd,\"menu-actions\":_vm.menuActions,\"menu-loading\":_vm.menuLoading},on:{\"save-changes\":function($event){return _vm.commitItem($event)},\"archive\":function($event){return _vm.commitArchive()},\"export\":function($event){return _vm.commitExport()},\"close\":function($event){return _vm.closeDialog()}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport { mapActions, mapGetters } from \"vuex\";\nimport Component from \"vue-class-component\";\n// network, data\nimport collections from \"@/network/collections\";\nimport { Furniture, Status } from \"@/data/Furniture\";\nimport { FClass } from \"@/data/furniture/Physical\";\nimport Timing from \"@/data/furniture/Timing\";\nimport ViewAction from \"@/data/ViewAction\";\n// components\nimport FurnitureTable from \"@/components/FurnitureTable.vue\";\nimport FurnitureTableHeader from \"@/components/FurnitureTableHeader.vue\";\nimport ViewActionGroup from \"@/components/ViewActionGroup.vue\";\nimport FurnitureCardDialog from \"@/components/FurnitureCardDialog.vue\";\nimport TableFilters from \"@/components/FurnitureTableFilters.vue\";\n// store\nimport { action } from \"@/store/modules/collection/types\";\n\nconst NAMESPACE = \"inventory\";\n\n@Component({\n  components: {\n    FurnitureTable,\n    FurnitureTableHeader,\n    ViewActionGroup,\n    FurnitureCardDialog,\n    TableFilters,\n  },\n  computed: mapGetters(NAMESPACE, {\n    inventory: \"getItems\",\n    current: \"getCurrent\",\n    selected: \"getSelected\",\n  }),\n  methods: mapActions(NAMESPACE, [\n    action.BIND_ITEMS,\n    action.SET_CURRENT,\n    action.CLEAR_CURRENT,\n    action.EXPORT_SELECTED,\n    action.EXPORT_CURRENT,\n    action.COMMIT_UPDATES,\n    action.UPDATE_CURRENT,\n    \"archiveSelected\",\n    \"archiveCurrent\",\n    \"commitAddItem\",\n  ]),\n})\nexport default class Inventory extends Vue {\n  readonly COLLECTION = collections.INVENTORY;\n\n  /** Vuex map helper properties */\n  readonly current!: Furniture;\n\n  readonly [action.BIND_ITEMS]!: () => Promise<void>;\n\n  readonly [action.SET_CURRENT]!: ({ item }: { item: Furniture }) => void;\n\n  readonly [action.EXPORT_SELECTED]!: () => Promise<void>;\n\n  readonly [action.CLEAR_CURRENT]!: () => void;\n\n  readonly [action.EXPORT_CURRENT]!: () => Promise<void>;\n\n  readonly [action.COMMIT_UPDATES]!: () => Promise<void>;\n\n  /* eslint-disable object-curly-newline */\n  readonly [action.UPDATE_CURRENT]!: ({\n    updates,\n  }: {\n    updates: Partial<Furniture>;\n  }) => Promise<void>;\n  /* eslint-enable object-curly-newline */\n\n  readonly commitAddItem!: () => Promise<void>;\n\n  readonly archiveCurrent!: () => Promise<void>;\n\n  /** Furniture card dialog */\n  isAdd = false;\n\n  get editCard(): boolean {\n    return !!this.current;\n  }\n\n  /** Actions and search */\n  search = \"\";\n\n  /** start filters */\n  startDateFilter = \"\";\n\n  endDateFilter = new Date().toISOString().substr(0, 10);\n\n  classFilter = Object.keys(FClass);\n\n  statusFilter = Object.values(Status)\n    .filter((v) => typeof (v as any) !== \"number\")\n    .map((text, index) => {\n      return index;\n    });\n\n  donorFilter = [] as string[];\n\n  zoneFilter = [] as string[];\n\n  get headers(): any {\n    return [\n      {\n        text: \"Class\",\n        value: \"physical.class\",\n        filter: (value: string): boolean => {\n          return this.classFilter.includes(value);\n        },\n      },\n      {\n        text: \"Status\",\n        value: \"status\",\n        filter: (value: number): boolean => {\n          return this.statusFilter.includes(value);\n        },\n      },\n      {\n        text: \"Zone\",\n        value: \"donor.zone\",\n        filter: (value: any): boolean => {\n          if (this.zoneFilter.length === 0) return true;\n          return this.zoneFilter.includes(value);\n        },\n      },\n      {\n        text: \"Address\",\n        value: \"donor.address\",\n        // filter: (value: any): boolean => {\n        //   if (this.addressFilter.length === 0) return true;\n        //   return this.addressFilter.includes(value);\n        // },\n      },\n      {\n        text: \"Donor\",\n        value: \"donor.name\",\n        filter: (value: any): boolean => {\n          if (this.donorFilter.length === 0) return true;\n          return this.donorFilter.includes(value);\n        },\n      },\n      {\n        text: \"Date Added\",\n        value: \"timing.dateAdded\",\n        filter: (value: any): boolean => {\n          const valDate = new Date(Timing.formatDate(value));\n          const endDate = new Date(this.endDateFilter);\n          if (this.startDateFilter === \"\") {\n            return valDate <= endDate;\n          }\n          const startDate = new Date(this.startDateFilter);\n          return Timing.inRange(valDate, startDate, endDate);\n        },\n      },\n    ];\n  }\n\n  /** end filters */\n\n  downloading = false;\n\n  get inventoryActions(): ViewAction[] {\n    return [\n      { icon: \"archive\", desc: \"Archive selected items\", emit: \"archive\" },\n      {\n        icon: \"cloud_download\",\n        desc: \"Export selected items to spreadsheet\",\n        emit: \"download\",\n        loading: (): boolean => this.downloading,\n      },\n    ];\n  }\n\n  menuLoading = false;\n\n  readonly menuActions: ViewAction[] = [\n    { icon: \"archive\", desc: \"Archive\", emit: \"archive\" },\n    {\n      icon: \"cloud_download\",\n      desc: \"Export\",\n      emit: \"export\",\n    },\n  ];\n\n  /**\n   * Called when component is mounted (lifecycle hook); binds inventory in\n   * store to Firebase.\n   */\n  mounted(): void {\n    this.bindItems();\n  }\n\n  async getSpreadsheet(): Promise<void> {\n    this.downloading = true;\n    await this.exportSelected();\n    this.downloading = false;\n  }\n\n  /**\n   * Shows dialog to add item\n   */\n  addItem(): void {\n    this.setCurrent({ item: new Furniture() });\n    this.isAdd = true;\n  }\n\n  /**\n   * Closes dialog by clearing current\n   */\n  closeDialog(): void {\n    this.clearCurrent();\n    this.isAdd = false;\n  }\n\n  /**\n   * Commits new item to Firestore\n   */\n  async commitItem(updates: Partial<Furniture>): Promise<void> {\n    this.updateCurrent({ updates });\n    if (this.isAdd) {\n      await this.commitAddItem();\n      this.isAdd = false;\n      this.clearCurrent();\n    } else {\n      await this.commitUpdates();\n    }\n  }\n\n  async commitArchive(): Promise<void> {\n    this.menuLoading = true;\n    await this.archiveCurrent();\n    this.menuLoading = false;\n    this.clearCurrent();\n  }\n\n  async commitExport(): Promise<void> {\n    this.menuLoading = true;\n    await this.exportCurrent();\n    this.menuLoading = false;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Inventory.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Inventory.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Inventory.vue?vue&type=template&id=294d2a39&\"\nimport script from \"./Inventory.vue?vue&type=script&lang=ts&\"\nexport * from \"./Inventory.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VCol,VIcon})\n"],"sourceRoot":""}